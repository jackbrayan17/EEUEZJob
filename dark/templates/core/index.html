{% extends 'base.html' %}
{% load static %}
{% block content %}
<!-- Hero Section -->
<section class="relative h-96 flex items-center">
    <video class="absolute inset-0 w-full h-full object-cover" autoplay loop muted playsinline>
        <source src="{% static 'images/hero-bg.mp4' %}" type="video/mp4">
        Votre navigateur ne prend pas en charge la vidéo.
    </video>
    <div class="absolute inset-0 bg-black opacity-40"></div>
    <div class="container mx-auto flex items-center space-x-8 px-4 relative z-10">
        <img src="{% static 'images/logo.png' %}" alt="EEUEZJob Logo" class="w-24 h-24">
        <div>
            <h1 class="text-4xl md:text-5xl font-bold text-orange-500 font-poppins">Bienvenue sur EEUEZJob</h1>
            <p class="text-lg text-white mt-2">Connectez-vous pour découvrir des opportunités d’emploi ou gérer vos recrutements.</p>
            <a href="{% url 'job_offer_list' %}" class="mt-4 inline-block bg-orange-500 text-white px-6 py-3 rounded hover:bg-orange-300">Voir les offres</a>
        </div>
    </div>
</section>

<!-- Description Section -->
<section class="py-8 px-4 mx-auto max-w-screen-xl lg:grid lg:grid-cols-2 lg:py-16 lg:px-6">
    <div class="font-light text-gray-300 sm:text-lg">
        <h2 class="mb-4 text-3xl sm:text-6xl leading-tight font-extrabold text-orange-500 font-poppins">
            <b>Trouver votre prochain emploi avec EEUEZJob</b>
        </h2>
        <p class="mb-4">
            Profitez d’une plateforme dédiée à la recherche d’emploi.
        </p>
        <li class="mb-6 block items-center">
            <span class="flex items-center">
                <svg class="w-6 h-6 mr-2" fill="rgb(245, 158, 11)" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1412 734q0-28-18-46l-91-90q-19-19-45-19t-45 19l-408 407-226-226q-19-19-45-19t-45 19l-91 90q-18 18-18 46 0 27 18 45l362 362q19 19 45 19 27 0 46-19l543-543q18-18 18-45zm252 162q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"></path>
                </svg>
                <b class="font-bold">Accéder à EEUEZJob</b>
            </span>
            <p class="text-lg">
                Prenez connaissance du contenu de la plateforme.
            </p>
        </li>
        <li class="mb-6 block items-center">
            <span class="flex items-center">
                <svg class="w-6 h-6 mr-2" fill="rgb(245, 158, 11)" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1412 734q0-28-18-46l-91-90q-19-19-45-19t-45 19l-408 407-226-226q-19-19-45-19t-45 19l-91 90q-18 18-18 46 0 27 18 45l362 362q19 19 45 19 27 0 46-19l543-543q18-18 18-45zm252 162q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"></path>
                </svg>
                <b class="font-bold">Créer un compte employé</b>
            </span>
            <p class="text-lg">
                Rendez-vous dans la page d’inscription dédiée aux chercheurs d’emploi et remplissez le formulaire.
            </p>
        </li>
        <li class="mb-6 block items-center">
            <span class="flex items-center">
                <svg class="w-6 h-6 mr-2" fill="rgb(245, 158, 11)" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1412 734q0-28-18-46l-91-90q-19-19-45-19t-45 19l-408 407-226-226q-19-19-45-19t-45 19l-91 90q-18 18-18 46 0 27 18 45l362 362q19 19 45 19 27 0 46-19l543-543q18-18 18-45zm252 162q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"></path>
                </svg>
                <b class="font-bold">Eh voilà</b>
            </span>
            <p class="text-lg">
                Une fois votre profil créé, vous pouvez le partager sur les réseaux sociaux, souscrire à nos programmes de sponsoring pour augmenter la portée de votre profil.
            </p>
        </li>
        <br>
        <a href="{% url 'account_signup' %}" class="inline-block bg-orange-500 text-white px-6 py-2.5 rounded-full text-sm font-bold hover:bg-orange-300">Créer mon compte</a>
    </div>
    <div class="grid grid-cols-2 gap-4 mt-8 lg:mt-0">
        <img class="w-full rounded-lg shadow-lg" src="{% static 'images/person1.jpg' %}" alt="Employé au travail">
        <img class="mt-4 w-full lg:mt-0 rounded-lg shadow-lg" src="{% static 'images/person2.jpg' %}" alt="Équipe collaborative">
    </div>
</section>

<!-- Testimonials Section -->
<section class="py-12 bg-gray-100">
    <div class="container mx-auto px-4 max-w-4xl">
        <h2 class="text-3xl font-bold text-orange-500 font-poppins mb-6 text-center">Ce que nos utilisateurs disent</h2>
        <div id="testimonials" class="relative overflow-hidden">
            {% if testimonials %}
                {% for testimonial in testimonials %}
                    <div class="testimonial-item absolute inset-0 opacity-0 transition-opacity duration-1000 ease-in-out text-center p-6 bg-white rounded-lg shadow-md transform translate-x-full">
                        <p class="text-lg text-gray-700 italic">"{{ testimonial.content|truncatewords:15 }}"</p>
                        <div class="flex justify-center mt-4">
                            {% for i in testimonial.rating|make_list %}
                                <svg class="w-6 h-6 {% if forloop.counter <= testimonial.rating %}fill-orange-500{% else %}fill-gray-300{% endif %}" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 .587l3.668 7.431 8.332 1.151-6.001 5.849 1.416 8.265L12 18.832l-7.415 3.451 1.416-8.265-6.001-5.849 8.332-1.151z"/>
                                </svg>
                            {% endfor %}
                        </div>
                        <p class="mt-2 text-orange-500 font-bold">{{ testimonial.user.username }}</p>
                    </div>
                {% endfor %}
            {% else %}
                <div class="text-center text-gray-500">Aucun témoignage pour le moment.</div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="py-12 bg-white">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold text-orange-500 font-poppins mb-6 text-center">Catégories populaires</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {% for category in categories %}
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow">
                    <h3 class="text-xl font-semibold text-orange-500">{{ category.name }}</h3>
                    <p class="text-gray-700 mt-2 line-clamp-2">{{ category.description|default:"Découvrez les opportunités dans ce secteur." }}</p>
                </div>
            {% empty %}
                <div class="text-center text-gray-500 col-span-full">Aucune catégorie disponible pour le moment.</div>
            {% endfor %}
        </div>
        <div class="text-center mt-8">
            <a href="{% url 'job_offer_list' %}" class="text-orange-500 hover:text-orange-300 underline transition-colors">Voir toutes les offres d’emploi</a>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
    const testimonials = document.querySelectorAll('.testimonial-item');
    let currentIndex = 0;

    function showTestimonial() {
        testimonials[currentIndex].style.opacity = '0';
        let nextIndex;
        do {
            nextIndex = Math.floor(Math.random() * testimonials.length);
        } while (nextIndex === currentIndex);
        currentIndex = nextIndex;
        testimonials[currentIndex].style.display = 'block';
        setTimeout(() => {
            testimonials[currentIndex].style.opacity = '1';
        }, 50);
    }

    showTestimonial();
    setInterval(showTestimonial, 5000);
</script>
{% endblock %}